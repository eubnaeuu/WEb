<!DOCTYPE html>
<html lang="kr">
	<head>
		<meta charset="UTF-8">
		<title>select과제</title>
		<style type="text/css">
			
			div {
				border: solid 1px;
				text-align: center;
				align-items: center;
			}
			#middlediv {
				height: 350px;
				display: flex;
				align-items: center;
			}
			#middledivin {
			margin: auto;
			}
			#leftdiv, #rightdiv {
				width: calc(50% - 103px);
				height: 350px;
				margin-bottom: 10px;
			}
			#leftselect, #rightselect {
				margin: auto;
				height:350px;
				line-height: 350px;
			}
			#leftdiv, #middlediv {
				float: left;
			}
			#rightdiv {
				float: right;
			}
			#bottomdiv {
				clear: both;
			}
			#middlediv button {
				width: 100px;
				margin: 10px;
			}
			.pressed {
  				background: tomato;
			}
			#inputareat{
			background-color: yellow;
			}
		</style>
	</head>
	<body> 			
		<h1>select객체 예제</h1>
		<div id="leftdiv">
			<select id="leftselect" multiple="multiple" size="20" style="width: 120px"></select>
		</div>
		<div id="middlediv" style="width: 200px;">
			<div id="middledivin">
				<button type="button" onclick="moveselect(leftbox,rightbox,)">&gt;</button><br>
				<button type="button" onclick="moveselect(leftbox,rightbox,'all')">&gt;&gt;</button><br>
				<button type="button" onclick="moveselect(rightbox,leftbox)">&lt;</button><br>
				<button type="button" onclick="moveselect(rightbox,leftbox,'all')">&lt;&lt;</button>
			</div>
		</div>
		<div id="rightdiv">
			<select id="rightselect" multiple="multiple" size="20" style="width: 120px"></select>
		</div>
		<div id="bottomdiv">
			<input id="inputarea" type="text" size="10" >
			<input id="inputareat" type="text" size="10" >
			<button type="button" onclick="addnum()">추가하기</button>
		</div>
	</body>
	<script type="text/javascript">
	
		var leftbox = document.getElementById("leftselect");
		var rightbox = document.getElementById("rightselect");
		var inputbox = document.getElementById("inputarea");
		var inputboxt = document.getElementById("inputareat");
		
		
		window.addEventListener("keydown", (e) => {
			const key = document.getElementById(e.key)
			console.log(e);
			if (key) inputbox.classList.add("pressed")
		});
		
// 		inputboxt.addEventListener("keydown", func);
		
// 		function func(){
// 			alert("func작동");
// 		}
		
		function addnum() {
			if (inputbox.value == "") { // 공백추가 방지
				return false;
			}

			for (var i = 0; i < leftbox.children.length; i++) { // 숫자 중복 검사(input과 기존숫자 비교)
				if (leftbox.children[i].value == inputbox.value ) {
					alert("\""+inputbox.value+"\""+"은 이미 존재합니다");
					inputbox.value = "";
					inputbox.focus();
					return false;
				}
			}
			
			for (var i = 0; i < rightbox.children.length; i++) { // 숫자 중복 검사
				if (rightbox.children[i].value == inputbox.value ) {
					alert("\""+inputbox.value+"\""+"은 이미 존재합니다");
					inputbox.value = "";
					inputbox.focus();
					return false;
				}
			}

			var opObj = document.createElement("option"); // option요소생성 후 추가
			opObj.innerHTML = inputbox.value;
			opObj.value = inputbox.value;
			leftbox.appendChild(opObj);
			inputbox.value = "";
			inputbox.focus();
		}

		function moveselect(from, to, range) {
			if(range == "all"){
				for (var i = 0; i < from.children.length; i++) { //to생성
					var oldseObj = from.children[i];
					to.appendChild(oldseObj);
					i--;
				}	
			}
			for (var i = 0; i < from.selectedOptions.length; i++) { // to생성
				if (i > 0) {
				}
				var oldseObj = from.selectedOptions[i];
				// 				var newseObj = document.createElement("option");
				// 				newseObj.value = oldseObj.value;
				// 				newseObj.innerHTML = oldseObj.innerHTML;
				to.appendChild(oldseObj);
				i--;
			}
			inputbox.focus();
		}
		// 			for (var i = from.selectedOptions.length - 1; i > -1; i--) { //from제거
		// 				from.removeChild(from.selectedOptions[i]);
		// 			}
		// 		}

	</script>
</html>
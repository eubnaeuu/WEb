<!DOCTYPE html>
<html lang="kr">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="../../js/jquery-3.6.0.js"></script>
<style type="text/css">
</style>
</head>
<body>
	<table border="10px solid">
		<tr>
			<td>d</td>
		</tr>
	</table>
	<form action="../jquery1/210325_hw_jq_1.html" method="get" id="fm">
		이름 : <input type="text"><br> 나이 : <input type="text"><br>
		<button type="submit">submit버튼</button>
		<!-- page를 바꿀 때 보통 submit사용(버튼 누르면 action 경로로 이동) -->
		<button type="button">post버튼</button>
		<button type="button" onclick="fnGet()">get버튼</button>
		<hr>
		<button type="button" onclick="fnAjax()">Ajax버튼</button>
		<hr>
		<button type="button" onclick="fnJsonText()">텍스트</button>
<!-- 		<button type="button" onclick="fnJsonHtml()">HTML</button> -->
		<button type="button" onclick="fnJsonObj()">JSON obj</button>
		<button type="button" onclick="fnJsonArr()">JSON 배열</button>
		<button type="button" onclick="fnJsonList()">JSON 목록</button>
	</form>
	<div id="divResult"></div>
</body>
<script type="text/javascript">
	
		function fnGet(){
			// submit 실행
			var fm = document.getElementById("fm"); // <form>
			fm.action = "html1.html?userId=test홍&paswword=12324"; // url 세팅
			fm.method = "post"; 
			fm.submit();
		}
		
		function fnAjax(){
			$.ajax({
				url : "intro.html"
				,type : "GET"
// 				,data : 
// 				,dataType : 
				,success : function(data){
					alert(data);
					$("#divResult").html(data);
				}
				,error : function(data){
					console.error(data);
				}
			});
		}
		
		function fnJsonText(){
			$.ajax({
// 				url : "../sample/data_text.txt" // 상대경로
				url : "/JqueryPro/jquery/sample/data_text" // 루트경로 : 맨앞 / 는 루트(webcontent)를 의미
				,type : "get"
// 				,data : 
				,dataType : "text" // html이라고 써도 가능
				,success : function(data){
					$("#divResult").html(data);
					alert(data);
				}
				,error : function(data){
					console.error(data);				
				}
			});
		}
		function fnJsonObj(){
			$.ajax({
				url : "/JqueryPro/jquery/sample/data_json_obj.txt"
				,dataType : "json"
				,success : function(data){
// 					console.log(data); // obj로 가져옴
// 					console.log(data.name);
					var str =""
							+"이름 : "+data.name+"<br>"
							+"나이 : "+data.age+"<br>"
							+"성별 : "+data.gender+"<br>"
							+"직업 : "+data.job;
					$("#divResult").html(str);
				}
				,error : function(data){
					console.error(data);
				}
			})
				}
		function fnJsonArr(){
			$.ajax({
				url : "/JqueryPro/jquery/sample/data_array.txt"
				,dataType : "json"
				,success : function(data){
					console.log(data);

					// for(in)
					var str1 = "<ol>";
					for(var i in data){  
					str1 += "<li>" + data[i] + "</li>"; 	
					}
					str1 += "</ol>";
					
		
					// $.each(arr, function(idx, item){})  
					var str2 = "<ol>";
					$.each(data,function(idx, item){
						str2 += "<li>" 
								+ "idx : "+ idx + " "
								+ "item : " + item + " "
								+ "this : "+this + " "
								+ "</li>";	
					});
					str2 += "</ol>";
						console.log(str2);
					$("#divResult").html(str1+"<hr>"+str2+"");
					}
				,error : function(data){
					console.error(data);
				}
			});
		}

		function fnJsonList() {
			$.ajax({
				url : "/JqueryPro/jquery/sample/data_json_list.txt",
				dataType : "json",
				success : function(data) {
					var str = "";
					for ( var i in data) {
						console.log(i);
						var obj = data[i];

						str += i + "번째 회원<br>" 
								+ "이름 : "+ obj.name + "<br>"
								+ "나이 : " + obj.age + "<br>" 
								+ "성별 : "+ obj.gender + "<br>" 
								+ "직업 : " + obj.job
								+ "<br><br><br>";
					}
								
						// table , tr ,td

						var table = "<table border='2px solid'>";
						table += "<tr>";
						table += "<th>번호</th>";
						for(var i in data[0]){
// 						for(var i of data[0]){ // error
						table += "<th>" + i + "</th>";
						}
						table += "</tr>";
						var cnt = 0;
						$(data).each(function() {
							cnt++;
							table += "<tr>"
							var tmp = this;
							table += "<td>"+cnt+"</td>";
							for (var i in tmp) {
								table += "<td>";
								table += tmp[i];
								table += "</td>";
								}
							table += "</tr>"
						});
						table += "</table>"
					
					// 					$("#divResult").html(str);
					$("#divResult").html(table);
				},
				error : function(data) {
					console.error(data);
				}
			});
		}
	</script>
</html>
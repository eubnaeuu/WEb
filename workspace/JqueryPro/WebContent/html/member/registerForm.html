<!DOCTYPE html>
<html lang="kr">
<head>
<title>회원가입 화면</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<!-- <script src="/JqueryPro/js/common/myutils.js"></script> -->
</head>
<body>
	<div class="container">
		<h2>회원가입</h2>
		<form class="form-horizontal" action="/action_page.php">
			<div class="form-group">
				<label class="control-label col-sm-2" for="memId">아이디:</label>
				<div class="col-sm-6">
					<input type="text" class="form-control" id="memId"
						placeholder="6~12자의 마무아라마" name="memId">
				</div>
				<button type="button" id="chkId" class="btn btn-info btn-sm" onclick="checkId()">중복검사</button>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memPass">비밀번호:</label>
				<div class="col-sm-7">
					<input type="password" class="form-control" id="memPass"
						placeholder="비밀번호를 입력해주세요" name="memPass">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memName">이름:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memName"
						placeholder="이름을 입력해주세요" name="memName">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memHp">전화번호:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memHp"
						placeholder="전화번호를 입력해주세요" name="memHp">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memBir">생년월일:</label>
				<div class="col-sm-7">
					<input type="date" class="form-control" id="memBir"
						placeholder="생년월일을 입력해주세요" name="memBir">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memHp">전화번호:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memHp"
						placeholder="전화번호를 입력해주세요" name="memHp">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memAdd1">주소1:</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" id="memAdd1"placeholder="주소를 입력해주세요" name="memAdd1">
				</div>
					 Trigger the modal with a button
  				<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal" onclick="tmp()">주소찾기</button>
				<div class="col-sm-5">
					<input type="text" class="form-control" id="memAdd1"placeholder="주소를 입력해주세요" name="memAdd1">
				</div>
				<div class="col-sm-10">
					<input type="text" class="form-control" id="memAdd1"placeholder="주소를 입력해주세요" name="memAdd1">
				</div>
						
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memAdd2">상세주소:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memAdd2"
						placeholder="건물번호,뭐라무러ㅏ.." name="memAdd2">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memZip">우편번호:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memZip"
						placeholder="예) 34354" name="memZip">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memMemorialType">기념일(내용):</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memMemorialType"
						placeholder="기념일(내용)를 입력해주세요" name="memMemorialType">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memMemorialDate">기념일(날짜):</label>
				<div class="col-sm-7">
					<input type="date" class="form-control" id="memMemorialDate"
						placeholder="기념일(날짜)를 입력해주세요" name="memMemorialDate">
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memMail">email:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memMail"
						placeholder="예) abcdefg@gmail.com" name="memMail">
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<div class="checkbox">
						email 동의여부 : 
						<label for="recvEmail_Y"><input type="checkbox" name="recvEmailYn" id="recvEmail_Y" value="Y">동의</label>
						<label for="recvEmail_N"><input type="checkbox" name="recvEmailYn" id="recvEmail_N" value="N">거부</label>
					</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memJob">직업:</label>
				<div class="col-sm-7">
					<select class="form-control" id="memLike" name="memLike">
<!-- 						<option val="01">프로그래머</option> -->
<!-- 						<option val="02">퍼블리셔</option> -->
<!-- 						<option val="03">프로게이머</option> -->
<!-- 						<option val="04">선생님</option> -->
<!-- 						<option val="05">학생</option> -->
<!-- 						<option val="06">공무원</option> -->
<!-- 						<option val="07">군인</option> -->
<!-- 						<option val="08">전업주부</option> -->
<!-- 						<option val="09">기타</option> -->
					</select>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memLike">취미:</label>
				<div class="col-sm-7">
					<label for="memLikeSwim"><input type="checkbox" id="memLikeSwim" name="memLike" value="01">수영 </label>
					<label for="memLikeJogging"><input type="checkbox" id="memLikeJogging" name="memLike" value="02">조깅 </label>
					<label for="memLikeHiking"><input type="checkbox" id="memLikeHiking" name="memLike" value="03">등산 </label>
					<label for="memLikeGame"><input type="checkbox" id="memLikeGame" name="memLike" value="04">게임 </label>
					<label for="memLikePiano"><input type="checkbox" id="memLikePiano" name="memLike" value="05">피아노</label>
					<label for="memLikeCook"><input type="checkbox" id="memLikeCook" name="memLike" value="06">요리 </label>
					<label for="memLikeSoccer"><input type="checkbox" id="memLikeSoccer" name="memLike" value="07">축구 </label>
					<label for="memLikeEtc"><input type="checkbox" id="memLikeEtc" name="memLike" value="08">기타 </label>
				</div>                                                                             
			</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="memComment">자기소개:</label>
				<div class="col-sm-7">
					<input type="text" class="form-control" id="memComment"
						placeholder="자기소개를 입력해주세요" name="memComment">
				</div>
			</div>
			

			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-default">제출</button>
				</div>
			</div>
		</form>
	</div>
	  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">주소 검색</h4>
        </div>
        <div class="modal-body">
          	시 : <select  id="add_si" name="add_si">
          		<option>선택하세요</option>
          		</select>
          	구 : <select  id="add_gu" name="add_gu">
          		<option>선택하세요</option>
          		</select>
          	동 : <select id="add_dong" name="add_dong">
          		<option>선택하세요</option>
          		</select>
          <button type="button">검색</button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Model End -->
</body>
<script type="text/javascript">



// function tmp(){
// 	$.ajax({
// 		url : "/JqueryPro/CodeServlet"
// 		,type : "post"
// 		,data : {"groupCode" : "A02"} // 직업코드
// 		,dataType : "json"
// 		,success : function(data){
// 			console.log(data);
// //				makeJobSelect(data);
// 			alert("성공");
// 		}
// 		,error : function(xhr){
// 			console.error(xhr);
// 			alert("오류");
// 		}
// 	});
// }
	$(document).ready(function(){
		// 직업코드 조회해서 세팅하기
		$.ajax({
			url : "/JqueryPro/CodeServlet"
			,type : "post"
			,data : {"groupCode" : "A02"} // 직업코드
			,dataType : "json"
			,success : function(data){
				console.log(data);
				makeJobSelect(data);
				alert("성공");
			}
			,error : function(xhr){
				console.error(xhr);
				alert("오류");
				
			}
		});		
	});
	
	function makeJobSelect(data){
		var strHtml = "";
		//방법1
// 		$("#memJob").html();
		//방법2
// 		$("#memJob").empty();
// 		$("#memJob").append();
		
		for(i=0; i<data.length; i++){
			strHtml += "<option val="
						+ data[i].value
						+">"
						+ data[i].name
						+"</option>";
		}
		console.log(strHtml);
		$("#memJob").html(strHtml);
	}
// 	<option val="09">기타</option>
	
	
	// DB에서 중복검사 수행
	function checkId() {
		
		// 				var memId = memid;
		var memId = $("#memId").val();
		alert(memId);
		// 빈값 확인
		if (isEmpty(memId)) {
			console.log(memId);
			alert("ID 값이 입력되지 않았습니댜");
			$("#memId").focus();
			return;
		}
// // 		유효성 검사 - 영어소문자와 숫자로 구성, 3글자 이상 10글지 이하
// 		var regExp = /^[a-Z0-9{3,10}]$/;
// 		console.log(regExp);
// 		if (!regExp.test(memId)) {
// 			alert("ID값이 유효하지 않습니다");
// 			$("#memId").focus();
// 			return;
// 		}
		// DB에서 중복검사 수행
		$.ajax({
			url : "/JqueryPro/MemberServlet"
			,type : "post"
			,data : {'memId' : memId, 'flag' : 'CHKID'}
			,dataType : "json"
			,success : function(data) {
				console.log(data);
// 				if (data[0].get == 0) {
// 				} else {
// 					alert("중복되었습니다");
// 				}
// 				if (data.getElementsByTagName("resultCnt") == 0) {
// 					chkid(data.getElementsByTagName("resultCnt"));
// 				} else {
// 					alert("중복되었습니다");
// 				}
			}
			,error : function(xhr) {
				console.error(xhr);
			}
		});
	}
	
	function isEmpty(val){
		alert("empty 실행중..");
		//val이 빈 값이거나 null이거나 undefined이거나 " ", "    " 등 인 경우
		if(val == null){
			alert("1");
			return true;
		}
		if(val == undefined){
			alert("2");
			return true;	
		}
		if(val == ""){
			alert("3");
			return true;	
		}
		if(val == " "){
			alert("4");
			return true;	
		}
		if(val.length == val.match(" ")){
			alert("5");
			return true;
		}
		return false;
		
	}
	
	
</script>
</html>
